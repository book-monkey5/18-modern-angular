import{a as te}from"./chunk-X7TYIBOD.js";import{A as V,Aa as L,B as k,D as r,Ea as w,F as H,Fa as Z,Ga as ee,H as j,K as m,M as f,O as s,Q as E,R as C,S as v,T as n,U as o,V as x,W as q,X as z,Y as K,Z as I,_ as p,aa as a,ba as u,ca as b,ea as g,ga as G,ha as h,ia as S,j as $,ja as J,oa as Q,q as c,qa as W,r as _,ra as X,sa as T,t as D,u as M,w as U,x as A,za as Y}from"./chunk-KV26HYDH.js";var F=class e{confirmText=k.required({alias:"bmConfirm"});confirm=V();onClick(){window.confirm(this.confirmText())&&this.confirm.emit()}static \u0275fac=function(t){return new(t||e)};static \u0275dir=D({type:e,selectors:[["","bmConfirm",""]],hostBindings:function(t,d){t&1&&I("click",function(){return d.onClick()})},inputs:{confirmText:[1,"bmConfirm","confirmText"]},outputs:{confirm:"confirm"},standalone:!0})};var B=class e{transform(i){return i?`${i.substring(0,3)}-${i.substring(3)}`:""}static \u0275fac=function(t){return new(t||e)};static \u0275pipe=M({name:"isbn",type:e,pure:!0,standalone:!0})};var P=class e{template=c(H);viewContainer=c(j);authService=c(te);constructor(){Q(()=>{this.authService.isAuthenticated()?this.viewContainer.createEmbeddedView(this.template):this.viewContainer.clear()})}static \u0275fac=function(t){return new(t||e)};static \u0275dir=D({type:e,selectors:[["","bmLoggedinOnly",""]],standalone:!0})};var ne=e=>["/admin/edit",e];function re(e,i){if(e&1&&(n(0,"p",1),a(1),o()),e&2){let t=p();r(),u(t.subtitle)}}function ae(e,i){if(e&1&&(n(0,"li"),a(1),o()),e&2){let t=i.$implicit;r(),u(t)}}function me(e,i){if(e&1&&(n(0,"div")(1,"h2"),a(2,"Published"),o(),a(3),h(4,"date"),o()),e&2){let t=p();r(3),b(" ",J(4,1,t.published,"longDate")," ")}}function le(e,i){if(e&1&&x(0,"img",3),e&2){let t=p();f("ngSrc",t.thumbnailUrl)}}function se(e,i){if(e&1){let t=K();q(0),n(1,"button",6),I("confirm",function(){U(t);let l=p(),oe=p();return A(oe.removeBook(l.isbn))}),a(2," Remove book "),o(),n(3,"a",7),a(4," Edit book "),o(),z()}if(e&2){let t=p();r(3),f("routerLink",G(1,ne,t.isbn))}}function pe(e,i){if(e&1&&(n(0,"div",0)(1,"h1"),a(2),o(),m(3,re,2,1,"p",1),n(4,"div",2)(5,"div")(6,"h2"),a(7,"Authors"),o(),n(8,"ul"),C(9,ae,2,1,"li",null,E),o()(),n(11,"div")(12,"h2"),a(13,"ISBN"),o(),a(14),h(15,"isbn"),o(),m(16,me,5,4,"div"),o(),n(17,"h2"),a(18,"Description"),o(),n(19,"p"),a(20),o(),m(21,le,1,1,"img",3),n(22,"a",4),a(23,"Back to list"),o(),m(24,se,5,3,"ng-container",5),o()),e&2){let t=i;r(2),u(t.title),r(),s(t.subtitle?3:-1),r(6),v(t.authors),r(5),b(" ",S(15,6,t.isbn)," "),r(2),s(t.published?16:-1),r(4),u(t.description),r(),s(t.thumbnailUrl?21:-1)}}var N=class e{service=c(w);router=c(Y);isbn=k.required();book$=Z(this.isbn).pipe($(i=>this.service.getSingle(i)));removeBook(i){this.service.remove(i).subscribe(()=>{this.router.navigateByUrl("/books")})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=_({type:e,selectors:[["bm-book-details"]],inputs:{isbn:[1,"isbn"]},standalone:!0,features:[g],decls:2,vars:3,consts:[[1,"details"],["role","doc-subtitle"],[1,"header"],["alt","Cover","width","200","height","250","priority","",3,"ngSrc"],["routerLink","..",1,"button","arrow-left"],[4,"bmLoggedinOnly"],["bmConfirm","Remove book?",1,"red",3,"confirm"],[1,"button",3,"routerLink"]],template:function(t,d){if(t&1&&(m(0,pe,25,8,"div",0),h(1,"async")),t&2){let l;s((l=S(1,1,d.book$))?0:-1,l)}},dependencies:[X,W,T,L,B,P,F]})};function ce(e,i){if(e&1&&x(0,"img",1),e&2){let t=p();f("ngSrc",t.thumbnailUrl)}}function de(e,i){if(e&1&&(n(0,"p",2),a(1),o()),e&2){let t=p();r(),b(" ",t.subtitle," ")}}function fe(e,i){if(e&1&&(n(0,"li"),a(1),o()),e&2){let t=i.$implicit;r(),b(" ",t," ")}}function ue(e,i){if(e&1&&(n(0,"a",0),m(1,ce,1,1,"img",1),n(2,"h2"),a(3),o(),m(4,de,2,1,"p",2),n(5,"ul",3),C(6,fe,2,1,"li",null,E),o(),n(8,"div"),a(9),h(10,"isbn"),o()()),e&2){let t=i;f("routerLink",t.isbn),r(),s(t.thumbnailUrl?1:-1),r(2),u(t.title),r(),s(t.subtitle?4:-1),r(2),v(t.authors),r(3),b("ISBN ",S(10,5,t.isbn),"")}}var R=class e{book=k.required();static \u0275fac=function(t){return new(t||e)};static \u0275cmp=_({type:e,selectors:[["bm-book-list-item"]],inputs:{book:[1,"book"]},standalone:!0,features:[g],decls:1,vars:1,consts:[[1,"list-item",3,"routerLink"],["alt","Cover","width","120","height","175",3,"ngSrc"],["role","doc-subtitle"],[1,"comma-list"]],template:function(t,d){if(t&1&&m(0,ue,11,7,"a",0),t&2){let l;s((l=d.book())?0:-1,l)}},dependencies:[L,B,T]})};var be=(e,i)=>i.isbn;function _e(e,i){if(e&1&&(n(0,"li"),x(1,"bm-book-list-item",1),o()),e&2){let t=i.$implicit;r(),f("book",t)}}function ke(e,i){e&1&&(n(0,"li"),a(1,"No books available."),o())}function Ce(e,i){e&1&&(n(0,"ul",0),C(1,_e,2,1,"li",null,be,!1,ke,2,0,"li"),o()),e&2&&(r(),v(i))}var O=class e{books=ee(c(w).getAll());static \u0275fac=function(t){return new(t||e)};static \u0275cmp=_({type:e,selectors:[["bm-book-list"]],standalone:!0,features:[g],decls:3,vars:1,consts:[[1,"book-list"],[3,"book"]],template:function(t,d){if(t&1&&(n(0,"h1"),a(1,"Books"),o(),m(2,Ce,4,1,"ul",0)),t&2){let l;r(2),s((l=d.books())?2:-1,l)}},dependencies:[R]})};var Ze=[{path:"",component:O},{path:":isbn",component:N}];export{Ze as BOOKS_ROUTES};
