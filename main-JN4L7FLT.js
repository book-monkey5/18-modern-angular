import{a as f}from"./chunk-HZ7WWEQQ.js";import{$,Aa as Q,Ba as X,Ca as Y,D as m,I as F,K as g,M as I,N as M,O as k,R,S as V,T as n,U as o,V as x,Y as _,Z as C,_ as b,aa as r,ba as D,c as w,ca as B,ea as u,g as L,ga as H,h as E,ha as j,i as T,ia as O,j as y,k as A,la as U,oa as N,q as p,r as l,ra as W,sa as G,ta as P,ua as z,va as K,w as h,wa as Z,x as v,xa as q,ya as d,za as J}from"./chunk-Q4YWAXBQ.js";var me=(e,t)=>t.isbn,se=e=>["/books",e];function le(e,t){if(e&1&&(n(0,"li")(1,"a",3),r(2),n(3,"p",4),r(4),o()()()),e&2){let c=t.$implicit;m(),I("routerLink",H(3,se,c.isbn)),m(),B(" ",c.title," "),m(2),D(c.subtitle)}}function ue(e,t){e&1&&(n(0,"li"),r(1,"No results"),o())}function de(e,t){e&1&&(n(0,"ul",2),R(1,le,5,5,"li",null,me,!1,ue,2,0,"li"),o()),e&2&&(m(),V(t))}var te=(()=>{let t=class t{constructor(){this.service=p(Y),this.input$=new w,this.isLoading=F(!1),this.results$=this.input$.pipe(L(a=>a.length>=3),E(500),T(),A(()=>this.isLoading.set(!0)),y(a=>this.service.getAllSearch(a)),A(()=>this.isLoading.set(!1)))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=l({type:t,selectors:[["bm-search"]],standalone:!0,features:[u],decls:4,vars:5,consts:[["searchInput",""],["type","search","autocomplete","off","aria-label","Search",3,"input"],[1,"search-results"],[3,"routerLink"],["role","doc-subtitle"]],template:function(i,s){if(i&1){let S=_();n(0,"input",1,0),C("input",function(){h(S);let pe=$(1);return v(s.input$.next(pe.value))}),o(),g(2,de,4,1,"ul",2),j(3,"async")}if(i&2){let S;M("loading",s.isLoading()),m(2),k((S=O(3,3,s.results$))?2:-1,S)}},dependencies:[d,N]});let e=t;return e})();var ie=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=l({type:t,selectors:[["bm-home"]],standalone:!0,features:[u],decls:7,vars:0,consts:[["routerLink","/books",1,"button","red"]],template:function(i,s){i&1&&(n(0,"h1"),r(1,"Home"),o(),n(2,"a",0),r(3,` Show book list
`),o(),n(4,"h2"),r(5,"Search"),o(),x(6,"bm-search"))},dependencies:[d,te]});let e=t;return e})();var ne=()=>{let e=p(f),t=p(q);return e.isAuthenticated()?!0:(window.alert("Not logged in!"),t.parseUrl("/home"))};var oe=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:ie},{path:"books",loadChildren:()=>import("./chunk-XXLU6LJ3.js").then(e=>e.BOOKS_ROUTES)},{path:"admin",loadChildren:()=>import("./chunk-KHO3DSZ6.js").then(e=>e.ADMIN_ROUTES),canActivate:[ne]}];var re=(e,t)=>{let c=p(f),a="1234567890";if(c.isAuthenticated()){let i=e.clone({setHeaders:{Authorization:`Bearer ${a}`}});return t(i)}else return t(e)};var ae={providers:[U({eventCoalescing:!0}),Q(oe,X()),W(P(),G([re])),K()]};function fe(e,t){if(e&1){let c=_();n(0,"button",6),C("click",function(){h(c);let i=b();return v(i.auth.logout())}),r(1,"Logout"),o()}}function he(e,t){if(e&1){let c=_();n(0,"button",7),C("click",function(){h(c);let i=b();return v(i.auth.login())}),r(1,"Login"),o()}}var ce=(()=>{let t=class t{constructor(){this.auth=p(f)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=l({type:t,selectors:[["bm-root"]],standalone:!0,features:[u],decls:12,vars:1,consts:[["routerLink","/home","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/books","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/admin","routerLinkActive","active","ariaCurrentWhenActive","page"],[1,"actions"],[1,"red"],[1,"green"],[1,"red",3,"click"],[1,"green",3,"click"]],template:function(i,s){i&1&&(n(0,"nav")(1,"a",0),r(2,"Home"),o(),n(3,"a",1),r(4,"Books"),o(),n(5,"a",2),r(6,"Administration"),o(),n(7,"div",3),g(8,fe,2,0,"button",4)(9,he,2,0,"button",5),o()(),n(10,"main"),x(11,"router-outlet"),o()),i&2&&(m(8),k(s.auth.isAuthenticated()?8:9))},dependencies:[Z,d,J]});let e=t;return e})();z(ce,ae).catch(e=>console.error(e));
