import{a as tt}from"./chunk-TNOCD5PB.js";import{$ as p,A as r,C as A,Da as L,E as V,Ea as Y,F as k,Fa as Z,H as y,I as H,K as m,N as f,P as s,R as D,S as C,T as v,U as n,V as o,W as x,X as j,Y as q,Z as z,_ as E,ba as a,ca as u,da as b,ga as K,ha as g,ia as B,j as O,ja as G,na as J,pa as Q,q as c,qa as W,ra as I,s as $,t as M,w as U,x as _,ya as X,za as T}from"./chunk-PMP3M7HJ.js";var w=class t{confirmText=_.required({alias:"bmConfirm"});confirm=U();onClick(){window.confirm(this.confirmText())&&this.confirm.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275dir=y({type:t,selectors:[["","bmConfirm",""]],hostBindings:function(e,d){e&1&&E("click",function(){return d.onClick()})},inputs:{confirmText:[1,"bmConfirm","confirmText"]},outputs:{confirm:"confirm"}})};var h=class t{transform(i){return i?`${i.substring(0,3)}-${i.substring(3)}`:""}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=H({name:"isbn",type:t,pure:!0})};var P=class t{template=c(A);viewContainer=c(V);authService=c(tt);constructor(){J(()=>{this.authService.isAuthenticated()?this.viewContainer.createEmbeddedView(this.template):this.viewContainer.clear()})}static \u0275fac=function(e){return new(e||t)};static \u0275dir=y({type:t,selectors:[["","bmLoggedinOnly",""]]})};var ot=t=>["/admin/edit",t];function nt(t,i){if(t&1&&(n(0,"p",1),a(1),o()),t&2){let e=p();r(),u(e.subtitle)}}function rt(t,i){if(t&1&&(n(0,"li"),a(1),o()),t&2){let e=i.$implicit;r(),u(e)}}function at(t,i){if(t&1&&(n(0,"div")(1,"h2"),a(2,"Published"),o(),a(3),g(4,"date"),o()),t&2){let e=p();r(3),b(" ",G(4,1,e.published,"longDate")," ")}}function mt(t,i){if(t&1&&x(0,"img",3),t&2){let e=p();f("ngSrc",e.thumbnailUrl)}}function lt(t,i){if(t&1){let e=z();j(0),n(1,"button",6),E("confirm",function(){$(e);let l=p(),it=p();return M(it.removeBook(l.isbn))}),a(2," Remove book "),o(),n(3,"a",7),a(4," Edit book "),o(),q()}if(t&2){let e=p();r(3),f("routerLink",K(1,ot,e.isbn))}}function st(t,i){if(t&1&&(n(0,"div",0)(1,"h1"),a(2),o(),m(3,nt,2,1,"p",1),n(4,"div",2)(5,"div")(6,"h2"),a(7,"Authors"),o(),n(8,"ul"),C(9,rt,2,1,"li",null,D),o()(),n(11,"div")(12,"h2"),a(13,"ISBN"),o(),a(14),g(15,"isbn"),o(),m(16,at,5,4,"div"),o(),n(17,"h2"),a(18,"Description"),o(),n(19,"p"),a(20),o(),m(21,mt,1,1,"img",3),n(22,"a",4),a(23,"Back to list"),o(),m(24,lt,5,3,"ng-container",5),o()),t&2){let e=i;r(2),u(e.title),r(),s(e.subtitle?3:-1),r(6),v(e.authors),r(5),b(" ",B(15,6,e.isbn)," "),r(2),s(e.published?16:-1),r(4),u(e.description),r(),s(e.thumbnailUrl?21:-1)}}var F=class t{service=c(L);router=c(X);isbn=_.required();book$=Y(this.isbn).pipe(O(i=>this.service.getSingle(i)));removeBook(i){this.service.remove(i).subscribe(()=>{this.router.navigateByUrl("/books")})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=k({type:t,selectors:[["bm-book-details"]],inputs:{isbn:[1,"isbn"]},decls:2,vars:3,consts:[[1,"details"],["role","doc-subtitle"],[1,"header"],["alt","Cover","width","200","height","250","priority","",3,"ngSrc"],["routerLink","..",1,"button","arrow-left"],[4,"bmLoggedinOnly"],["bmConfirm","Remove book?",1,"red",3,"confirm"],[1,"button",3,"routerLink"]],template:function(e,d){if(e&1&&(m(0,st,25,8,"div",0),g(1,"async")),e&2){let l;s((l=B(1,1,d.book$))?0:-1,l)}},dependencies:[W,Q,I,T,h,P,w],encapsulation:2})};function pt(t,i){if(t&1&&x(0,"img",1),t&2){let e=p();f("ngSrc",e.thumbnailUrl)}}function ct(t,i){if(t&1&&(n(0,"p",2),a(1),o()),t&2){let e=p();r(),b(" ",e.subtitle," ")}}function dt(t,i){if(t&1&&(n(0,"li"),a(1),o()),t&2){let e=i.$implicit;r(),b(" ",e," ")}}function ft(t,i){if(t&1&&(n(0,"a",0),m(1,pt,1,1,"img",1),n(2,"h2"),a(3),o(),m(4,ct,2,1,"p",2),n(5,"ul",3),C(6,dt,2,1,"li",null,D),o(),n(8,"div"),a(9),g(10,"isbn"),o()()),t&2){let e=i;f("routerLink",e.isbn),r(),s(e.thumbnailUrl?1:-1),r(2),u(e.title),r(),s(e.subtitle?4:-1),r(2),v(e.authors),r(3),b("ISBN ",B(10,5,e.isbn),"")}}var N=class t{book=_.required();static \u0275fac=function(e){return new(e||t)};static \u0275cmp=k({type:t,selectors:[["bm-book-list-item"]],inputs:{book:[1,"book"]},decls:1,vars:1,consts:[[1,"list-item",3,"routerLink"],["alt","Cover","width","120","height","175",3,"ngSrc"],["role","doc-subtitle"],[1,"comma-list"]],template:function(e,d){if(e&1&&m(0,ft,11,7,"a",0),e&2){let l;s((l=d.book())?0:-1,l)}},dependencies:[T,h,I],encapsulation:2})};var ut=(t,i)=>i.isbn;function bt(t,i){if(t&1&&(n(0,"li"),x(1,"bm-book-list-item",1),o()),t&2){let e=i.$implicit;r(),f("book",e)}}function _t(t,i){t&1&&(n(0,"li"),a(1,"No books available."),o())}function kt(t,i){t&1&&(n(0,"ul",0),C(1,bt,2,1,"li",null,ut,!1,_t,2,0,"li"),o()),t&2&&(r(),v(i))}var R=class t{books=Z(c(L).getAll());static \u0275fac=function(e){return new(e||t)};static \u0275cmp=k({type:t,selectors:[["bm-book-list"]],decls:3,vars:1,consts:[[1,"book-list"],[3,"book"]],template:function(e,d){if(e&1&&(n(0,"h1"),a(1,"Books"),o(),m(2,kt,4,1,"ul",0)),e&2){let l;r(2),s((l=d.books())?2:-1,l)}},dependencies:[N],encapsulation:2})};var Yt=[{path:"",component:R},{path:":isbn",component:F}];export{Yt as BOOKS_ROUTES};
