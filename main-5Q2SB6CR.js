import{a as u}from"./chunk-HV6YNWGA.js";import{$ as x,Aa as J,Ba as Q,Ca as X,Da as Y,E as I,F as s,K as v,N as F,O as D,P as _,S as H,T as R,U as i,V as o,W as g,Z as h,_ as C,aa as N,ba as r,c as w,ca as $,da as M,g as L,ga as V,h as E,ha as B,i as T,ia as O,j as y,k,ka as j,pa as P,q as c,s as d,sa as U,t as f,ta as W,ua as G,va as z,wa as K,xa as Z,ya as q,z as m,za as l}from"./chunk-5FP3MFSA.js";var pe=(e,t)=>t.isbn,ce=e=>["/books",e];function me(e,t){if(e&1&&(i(0,"li")(1,"a",3),r(2),i(3,"p",4),r(4),o()()()),e&2){let n=t.$implicit;m(),F("routerLink",V(3,ce,n.isbn)),m(),M(" ",n.title," "),m(2),$(n.subtitle)}}function se(e,t){e&1&&(i(0,"li"),r(1,"No results"),o())}function le(e,t){e&1&&(i(0,"ul",2),H(1,me,5,5,"li",null,pe,!1,se,2,0,"li"),o()),e&2&&(m(),R(t))}var S=class e{service=c(Y);input$=new w;isLoading=I(!1);results$;constructor(){this.results$=this.input$.pipe(L(t=>t.length>=3),E(500),T(),k(()=>this.isLoading.set(!0)),y(t=>this.service.getAllSearch(t)),k(()=>this.isLoading.set(!1)))}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=s({type:e,selectors:[["bm-search"]],decls:4,vars:5,consts:[["searchInput",""],["type","search","autocomplete","off","aria-label","Search",3,"input"],[1,"search-results"],[3,"routerLink"],["role","doc-subtitle"]],template:function(n,a){if(n&1){let p=h();i(0,"input",1,0),C("input",function(){d(p);let ae=N(1);return f(a.input$.next(ae.value))}),o(),v(2,le,4,1,"ul",2),B(3,"async")}if(n&2){let p;D("loading",a.isLoading()),m(2),_((p=O(3,3,a.results$))?2:-1,p)}},dependencies:[l,P],encapsulation:2})};var b=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=s({type:e,selectors:[["bm-home"]],decls:7,vars:0,consts:[["routerLink","/books",1,"button","red"]],template:function(n,a){n&1&&(i(0,"h1"),r(1,"Home"),o(),i(2,"a",0),r(3,` Show book list
`),o(),i(4,"h2"),r(5,"Search"),o(),g(6,"bm-search"))},dependencies:[l,S],encapsulation:2})};var ne=()=>{let e=c(u),t=c(q);return e.isAuthenticated()?!0:(window.alert("Not logged in!"),t.parseUrl("/home"))};var ie=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:b},{path:"books",loadChildren:()=>import("./chunk-CSJRUDIB.js").then(e=>e.BOOKS_ROUTES)},{path:"admin",loadChildren:()=>import("./chunk-PZA4UVQV.js").then(e=>e.ADMIN_ROUTES),canActivate:[ne]}];var oe=(e,t)=>{let n=c(u),a="1234567890";if(n.isAuthenticated()){let p=e.clone({setHeaders:{Authorization:`Bearer ${a}`}});return t(p)}else return t(e)};var re={providers:[j({eventCoalescing:!0}),Q(ie,X()),U(G(),W([oe])),K()]};function ue(e,t){if(e&1){let n=h();i(0,"button",6),C("click",function(){d(n);let p=x();return f(p.auth.logout())}),r(1,"Logout"),o()}}function de(e,t){if(e&1){let n=h();i(0,"button",7),C("click",function(){d(n);let p=x();return f(p.auth.login())}),r(1,"Login"),o()}}var A=class e{auth=c(u);static \u0275fac=function(n){return new(n||e)};static \u0275cmp=s({type:e,selectors:[["bm-root"]],decls:12,vars:1,consts:[["routerLink","/home","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/books","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/admin","routerLinkActive","active","ariaCurrentWhenActive","page"],[1,"actions"],[1,"red"],[1,"green"],[1,"red",3,"click"],[1,"green",3,"click"]],template:function(n,a){n&1&&(i(0,"nav")(1,"a",0),r(2,"Home"),o(),i(3,"a",1),r(4,"Books"),o(),i(5,"a",2),r(6,"Administration"),o(),i(7,"div",3),v(8,ue,2,0,"button",4)(9,de,2,0,"button",5),o()(),i(10,"main"),g(11,"router-outlet"),o()),n&2&&(m(8),_(a.auth.isAuthenticated()?8:9))},dependencies:[Z,l,J],encapsulation:2})};z(A,re).catch(e=>console.error(e));
