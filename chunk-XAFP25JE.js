import{a as Y}from"./chunk-EY2JACQQ.js";import{A as k,Ca as F,D as a,Da as W,Ea as X,F as A,H as N,K as s,M as _,O as c,Q as D,R as v,S as x,T as o,U as n,V as S,W as V,X as H,Y as j,Z as I,_ as p,aa as m,ba as b,ca as C,ea as g,ga as q,ha as B,ia as y,j as R,ja as z,ma as K,oa as G,pa as J,q as f,qa as w,r as h,t as T,u as $,w as M,x as P,xa as Q,ya as L,z as U}from"./chunk-MZQ2PGVL.js";var Z=(()=>{let e=class e{constructor(){this.confirmText=k.required({alias:"bmConfirm"}),this.confirm=U()}onClick(){window.confirm(this.confirmText())&&this.confirm.emit()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=T({type:e,selectors:[["","bmConfirm",""]],hostBindings:function(r,d){r&1&&I("click",function(){return d.onClick()})},inputs:{confirmText:[1,"bmConfirm","confirmText"]},outputs:{confirm:"confirm"},standalone:!0});let t=e;return t})();var O=(()=>{let e=class e{transform(l){return l?`${l.substring(0,3)}-${l.substring(3)}`:""}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=$({name:"isbn",type:e,pure:!0,standalone:!0});let t=e;return t})();var tt=(()=>{let e=class e{constructor(){this.template=f(A),this.viewContainer=f(N),this.authService=f(Y),K(()=>{this.authService.isAuthenticated()?this.viewContainer.createEmbeddedView(this.template):this.viewContainer.clear()})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=T({type:e,selectors:[["","bmLoggedinOnly",""]],standalone:!0});let t=e;return t})();var ot=t=>["/admin/edit",t];function rt(t,e){if(t&1&&(o(0,"p",1),m(1),n()),t&2){let i=p();a(),b(i.subtitle)}}function at(t,e){if(t&1&&(o(0,"li"),m(1),n()),t&2){let i=e.$implicit;a(),b(i)}}function mt(t,e){if(t&1&&(o(0,"div")(1,"h2"),m(2,"Published"),n(),m(3),B(4,"date"),n()),t&2){let i=p();a(3),C(" ",z(4,1,i.published,"longDate")," ")}}function lt(t,e){if(t&1&&S(0,"img",3),t&2){let i=p();_("ngSrc",i.thumbnailUrl)}}function st(t,e){if(t&1){let i=j();V(0),o(1,"button",6),I("confirm",function(){M(i);let r=p(),d=p();return P(d.removeBook(r.isbn))}),m(2," Remove book "),n(),o(3,"a",7),m(4," Edit book "),n(),H()}if(t&2){let i=p();a(3),_("routerLink",q(1,ot,i.isbn))}}function ct(t,e){if(t&1&&(o(0,"div",0)(1,"h1"),m(2),n(),s(3,rt,2,1,"p",1),o(4,"div",2)(5,"div")(6,"h2"),m(7,"Authors"),n(),o(8,"ul"),v(9,at,2,1,"li",null,D),n()(),o(11,"div")(12,"h2"),m(13,"ISBN"),n(),m(14),B(15,"isbn"),n(),s(16,mt,5,4,"div"),n(),o(17,"h2"),m(18,"Description"),n(),o(19,"p"),m(20),n(),s(21,lt,1,1,"img",3),o(22,"a",4),m(23,"Back to list"),n(),s(24,st,5,3,"ng-container",5),n()),t&2){let i=e;a(2),b(i.title),a(),c(i.subtitle?3:-1),a(6),x(i.authors),a(5),C(" ",y(15,6,i.isbn)," "),a(2),c(i.published?16:-1),a(4),b(i.description),a(),c(i.thumbnailUrl?21:-1)}}var et=(()=>{let e=class e{constructor(){this.service=f(F),this.router=f(Q),this.isbn=k.required(),this.book$=W(this.isbn).pipe(R(l=>this.service.getSingle(l)))}removeBook(l){this.service.remove(l).subscribe(()=>{this.router.navigateByUrl("/books")})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=h({type:e,selectors:[["bm-book-details"]],inputs:{isbn:[1,"isbn"]},standalone:!0,features:[g],decls:2,vars:3,consts:[[1,"details"],["role","doc-subtitle"],[1,"header"],["alt","Cover","width","200","height","250","priority","",3,"ngSrc"],["routerLink","..",1,"button","arrow-left"],[4,"bmLoggedinOnly"],["bmConfirm","Remove book?",1,"red",3,"confirm"],[1,"button",3,"routerLink"]],template:function(r,d){if(r&1&&(s(0,ct,25,8,"div",0),B(1,"async")),r&2){let u;c((u=y(1,1,d.book$))?0:-1,u)}},dependencies:[J,G,w,L,O,tt,Z]});let t=e;return t})();function pt(t,e){if(t&1&&S(0,"img",1),t&2){let i=p();_("ngSrc",i.thumbnailUrl)}}function dt(t,e){if(t&1&&(o(0,"p",2),m(1),n()),t&2){let i=p();a(),C(" ",i.subtitle," ")}}function ut(t,e){if(t&1&&(o(0,"li"),m(1),n()),t&2){let i=e.$implicit;a(),C(" ",i," ")}}function ft(t,e){if(t&1&&(o(0,"a",0),s(1,pt,1,1,"img",1),o(2,"h2"),m(3),n(),s(4,dt,2,1,"p",2),o(5,"ul",3),v(6,ut,2,1,"li",null,D),n(),o(8,"div"),m(9),B(10,"isbn"),n()()),t&2){let i=e;_("routerLink",i.isbn),a(),c(i.thumbnailUrl?1:-1),a(2),b(i.title),a(),c(i.subtitle?4:-1),a(2),x(i.authors),a(3),C("ISBN ",y(10,5,i.isbn),"")}}var it=(()=>{let e=class e{constructor(){this.book=k.required()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=h({type:e,selectors:[["bm-book-list-item"]],inputs:{book:[1,"book"]},standalone:!0,features:[g],decls:1,vars:1,consts:[[1,"list-item",3,"routerLink"],["alt","Cover","width","120","height","175",3,"ngSrc"],["role","doc-subtitle"],[1,"comma-list"]],template:function(r,d){if(r&1&&s(0,ft,11,7,"a",0),r&2){let u;c((u=d.book())?0:-1,u)}},dependencies:[L,O,w]});let t=e;return t})();var _t=(t,e)=>e.isbn;function bt(t,e){if(t&1&&(o(0,"li"),S(1,"bm-book-list-item",1),n()),t&2){let i=e.$implicit;a(),_("book",i)}}function Ct(t,e){t&1&&(o(0,"li"),m(1,"No books available."),n())}function ht(t,e){t&1&&(o(0,"ul",0),v(1,bt,2,1,"li",null,_t,!1,Ct,2,0,"li"),n()),t&2&&(a(),x(e))}var nt=(()=>{let e=class e{constructor(){this.books=X(f(F).getAll())}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=h({type:e,selectors:[["bm-book-list"]],standalone:!0,features:[g],decls:3,vars:1,consts:[[1,"book-list"],[3,"book"]],template:function(r,d){if(r&1&&(o(0,"h1"),m(1,"Books"),n(),s(2,ht,4,1,"ul",0)),r&2){let u;a(2),c((u=d.books())?2:-1,u)}},dependencies:[it]});let t=e;return t})();var Zt=[{path:"",component:nt},{path:":isbn",component:et}];export{Zt as BOOKS_ROUTES};
