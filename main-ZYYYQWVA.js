import{a as f}from"./chunk-X5KGH3HG.js";import{$ as b,Aa as Q,Ba as X,Ca as Y,E as m,J as F,L as g,N as I,O as M,P as k,S as R,T as V,U as n,V as o,W as x,Z as _,_ as C,aa as $,ba as r,c as w,ca as D,da as B,fa as u,g as L,h as E,ha as H,i as T,ia as j,j as y,ja as O,k as A,oa as U,q as p,ra as N,s as l,sa as W,ta as G,ua as P,va as z,wa as K,x as h,xa as q,y as v,ya as d,za as J}from"./chunk-KA3ORRWD.js";var pe=(e,t)=>t.isbn,me=e=>["/books",e];function se(e,t){if(e&1&&(n(0,"li")(1,"a",3),r(2),n(3,"p",4),r(4),o()()()),e&2){let c=t.$implicit;m(),I("routerLink",H(3,me,c.isbn)),m(),B(" ",c.title," "),m(2),D(c.subtitle)}}function le(e,t){e&1&&(n(0,"li"),r(1,"No results"),o())}function ue(e,t){e&1&&(n(0,"ul",2),R(1,se,5,5,"li",null,pe,!1,le,2,0,"li"),o()),e&2&&(m(),V(t))}var ee=(()=>{let t=class t{constructor(){this.service=p(Y),this.input$=new w,this.isLoading=F(!1),this.results$=this.input$.pipe(L(a=>a.length>=3),E(500),T(),A(()=>this.isLoading.set(!0)),y(a=>this.service.getAllSearch(a)),A(()=>this.isLoading.set(!1)))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=l({type:t,selectors:[["bm-search"]],standalone:!0,features:[u],decls:4,vars:5,consts:[["searchInput",""],["type","search","autocomplete","off","aria-label","Search",3,"input"],[1,"search-results"],[3,"routerLink"],["role","doc-subtitle"]],template:function(i,s){if(i&1){let S=_();n(0,"input",1,0),C("input",function(){h(S);let ce=$(1);return v(s.input$.next(ce.value))}),o(),g(2,ue,4,1,"ul",2),j(3,"async")}if(i&2){let S;M("loading",s.isLoading()),m(2),k(2,(S=O(3,3,s.results$))?2:-1,S)}},dependencies:[d,U]});let e=t;return e})();var te=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=l({type:t,selectors:[["bm-home"]],standalone:!0,features:[u],decls:7,vars:0,consts:[["routerLink","/books",1,"button","red"]],template:function(i,s){i&1&&(n(0,"h1"),r(1,"Home"),o(),n(2,"a",0),r(3,` Show book list
`),o(),n(4,"h2"),r(5,"Search"),o(),x(6,"bm-search"))},dependencies:[d,ee]});let e=t;return e})();var ie=()=>{let e=p(f),t=p(q);return e.isAuthenticated()?!0:(window.alert("Not logged in!"),t.parseUrl("/home"))};var ne=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:te},{path:"books",loadChildren:()=>import("./chunk-XLDWT5OQ.js").then(e=>e.BOOKS_ROUTES)},{path:"admin",loadChildren:()=>import("./chunk-5W26J5TX.js").then(e=>e.ADMIN_ROUTES),canActivate:[ie]}];var oe=(e,t)=>{let c=p(f),a="1234567890";if(c.isAuthenticated()){let i=e.clone({setHeaders:{Authorization:`Bearer ${a}`}});return t(i)}else return t(e)};var re={providers:[Q(ne,X()),N(G(),W([oe])),z()]};function de(e,t){if(e&1){let c=_();n(0,"button",5),C("click",function(){h(c);let i=b();return v(i.auth.logout())}),r(1,"Logout"),o()}}function fe(e,t){if(e&1){let c=_();n(0,"button",6),C("click",function(){h(c);let i=b();return v(i.auth.login())}),r(1,"Login"),o()}}var ae=(()=>{let t=class t{constructor(){this.auth=p(f)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=l({type:t,selectors:[["bm-root"]],standalone:!0,features:[u],decls:12,vars:1,consts:[["routerLink","/home","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/books","routerLinkActive","active","ariaCurrentWhenActive","page"],["routerLink","/admin","routerLinkActive","active","ariaCurrentWhenActive","page"],[1,"actions"],[1,"red"],[1,"red",3,"click"],[1,"green",3,"click"]],template:function(i,s){i&1&&(n(0,"nav")(1,"a",0),r(2,"Home"),o(),n(3,"a",1),r(4,"Books"),o(),n(5,"a",2),r(6,"Administration"),o(),n(7,"div",3),g(8,de,2,0,"button",4)(9,fe,2,0),o()(),n(10,"main"),x(11,"router-outlet"),o()),i&2&&(m(8),k(8,s.auth.isAuthenticated()?8:9))},dependencies:[K,d,J]});let e=t;return e})();P(ae,re).catch(e=>console.error(e));
